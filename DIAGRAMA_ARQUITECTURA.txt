
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    PLATAFORMA CFE - ARQUITECTURA                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“ EN CAMPO (OFFLINE)                             â”‚
â”‚                                                                           â”‚
â”‚  ğŸ‘· Trabajador instalando medidor en zona remota                          â”‚
â”‚  ğŸ“µ Sin seÃ±al de internet                                                 â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  ğŸ“± PWA INSTALADA EN CELULAR                         â”‚                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸŸ¡ MODO OFFLINE ACTIVO                      â”‚  â”‚                â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  âœï¸  Llena formulario CFE                     â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  â”œâ”€ Folio: CFE-2025-001                      â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  â”œâ”€ UbicaciÃ³n: Calle 5 #123                  â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  â”œâ”€ Tipo: InstalaciÃ³n medidor                â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  â””â”€ Materiales: Cable, medidor, etc.         â”‚  â”‚                â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸ’¾ Auto-guardado cada 2 segundos             â”‚  â”‚                â”‚
â”‚  â”‚  â”‚     â†“                                         â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸ“¦ IndexedDB (base de datos local)           â”‚  â”‚                â”‚
â”‚  â”‚  â”‚     â””â”€ form_1738167890123                    â”‚  â”‚                â”‚
â”‚  â”‚  â”‚     â””â”€ form_1738167923456                    â”‚  â”‚                â”‚
â”‚  â”‚  â”‚     â””â”€ form_1738168012789                    â”‚  â”‚                â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸ”´ Banner amarillo:                          â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  "3 formularios guardados offline"           â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  "Se sincronizarÃ¡n al conectar a la red"     â”‚  â”‚                â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                â”‚
â”‚  â”‚                                                      â”‚                â”‚
â”‚  â”‚  ğŸ”Œ Service Worker: Cachea todo                     â”‚                â”‚
â”‚  â”‚  âœ… Funciona 100% sin internet                      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              ğŸš— Regresa...
                                  â¬‡ï¸

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ¢ EN LA OFICINA (ONLINE)                            â”‚
â”‚                       ğŸ“¶ Conectado al WiFi Local                          â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  ğŸ“± CELULAR (PWA)                                    â”‚                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸŸ¢ MODO ONLINE ACTIVO                       â”‚  â”‚                â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚                â”‚
â”‚  â”‚  â”‚  ğŸ” Detectando servidor...                    â”‚  â”‚                â”‚
â”‚  â”‚  â”‚     â”œâ”€ GET /api/health cada 30s              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â”‚     â””â”€ âœ… Servidor encontrado!                â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ”„ SincronizaciÃ³n automÃ¡tica iniciada        â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚       â¬‡ï¸       â”‚
â”‚  â”‚  â”‚  ğŸ“¤ Subiendo formularios...                   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/reports/generate (form 1) â”€â”€â”¼â”€â”€â”¼â”€â†’â”‚ Servidor â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/reports/generate (form 2) â”€â”€â”¼â”€â”€â”¼â”€â†’â”‚  Ubuntu  â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ POST /api/reports/generate (form 3) â”€â”€â”¼â”€â”€â”¼â”€â†’â”‚          â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚  â”‚ :3000    â”‚ â”‚
â”‚  â”‚  â”‚  âœ… Sincronizados 3 formularios               â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â”‚  ğŸ—‘ï¸  Eliminados de IndexedDB                  â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚                                               â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚  ğŸŸ¢ Banner verde:                             â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚  "Todo sincronizado âœ…"                       â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â”‚  "Ãšltima sync: 14:32"                        â”‚  â”‚       â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚        â”‚
â”‚                                                                 â”‚        â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                         â¬‡ï¸                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  ğŸ–¥ï¸  SERVIDOR UBUNTU (IP: 192.168.1.100)                    â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ³ Node.js + Express (Puerto 3000)                  â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  â”œâ”€ âœ… GET  /api/health          (Health check)     â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  â”œâ”€ ğŸ” POST /api/auth/login      (AutenticaciÃ³n)    â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“ POST /api/reports/generate (Crear reporte)   â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“‹ GET  /api/reports          (Listar todos)    â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  â””â”€ ğŸ“„ GET  /api/reports/:id/download (PDF)         â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â”‚                         â¬‡ï¸                                  â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ’¾ SQLite3 Database                                 â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ“ /database/plataformaCFE.db                       â”‚  â”‚        â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ“Š Tabla: users                                     â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â”œâ”€ admin@cfe.com (role: admin)                  â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â””â”€ trabajador@cfe.com (role: trabajador)        â”‚  â”‚        â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ“Š Tabla: reports                                   â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â”œâ”€ [1] CFE-2025-001 (InstalaciÃ³n medidor)       â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â”œâ”€ [2] CFE-2025-002 (ReparaciÃ³n)                â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â””â”€ [3] CFE-2025-003 (Mantenimiento)             â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â”‚                         â¬‡ï¸                                  â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ¤– Puppeteer (GeneraciÃ³n de PDFs)                   â”‚  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ“ /reports/generated/                              â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â”œâ”€ reporte_1.pdf  âœ…                             â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â”œâ”€ reporte_2.pdf  âœ…                             â”‚  â”‚        â”‚
â”‚  â”‚  â”‚     â””â”€ reporte_3.pdf  âœ…                             â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â”‚                                                             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                         â¬†ï¸                                                â”‚
â”‚                         â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  ğŸ’» ADMIN DASHBOARD (Cualquier navegador)                   â”‚        â”‚
â”‚  â”‚  ğŸŒ http://192.168.1.100                                    â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚  ğŸ“Š EstadÃ­sticas:                                     â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚  â”‚     â”œâ”€ Total reportes: 3                             â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Pendientes: 1                                 â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Completados: 2                                â”‚  â”‚
â”‚  â”‚  â”‚     â””â”€ Este mes: 3                                   â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“‹ Lista de Reportes:                               â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Folio         â”‚ Usuario    â”‚ Fecha â”‚ Estado â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ CFE-2025-001 â”‚ Juan P.   â”‚ 29/11 â”‚ âœ… OK   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ CFE-2025-002 â”‚ MarÃ­a G.  â”‚ 29/11 â”‚ âœ… OK   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ CFE-2025-003 â”‚ Pedro L.  â”‚ 29/11 â”‚ â³ Pend â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ”½ Botones: [Descargar PDF] [Ver detalles]         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ”„ FLUJO DE SINCRONIZACIÃ“N                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ“± PWA                          ğŸ–¥ï¸  Servidor Ubuntu
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚          â”‚                    â”‚              â”‚
  â”‚  Timer   â”‚  Cada 30 seg       â”‚   Express    â”‚
  â”‚  â°      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   :3000      â”‚
  â”‚          â”‚  GET /api/health   â”‚              â”‚
  â”‚          â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   200 OK     â”‚
  â”‚          â”‚                    â”‚              â”‚
  â”‚  âœ… OK   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚          â”‚
  â”‚ Â¿Datos   â”‚
  â”‚ pendien? â”‚ â”€â†’ SÃ
  â”‚          â”‚     â”‚
  â”‚          â”‚     â”œâ†’ POST /api/reports/generate
  â”‚          â”‚     â”‚  { folio, fecha, ubicacion... }
  â”‚          â”‚ â†â”€â”€â”€â”¤  201 Created + PDF generado
  â”‚          â”‚     â”‚
  â”‚          â”‚     â”œâ†’ Eliminar de IndexedDB
  â”‚          â”‚     â”‚
  â”‚          â”‚     â””â†’ Actualizar UI (Banner verde)
  â”‚          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸŒ CONFIGURACIÃ“N DE RED LOCAL                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Router WiFi: 192.168.1.1
  â””â”€â”€â”€ Red Local: 192.168.1.0/24
       â”œâ”€ ğŸ–¥ï¸  Servidor Ubuntu ........ 192.168.1.100 (IP fija)
       â”œâ”€ ğŸ“± Celular Trabajador 1 .... 192.168.1.101
       â”œâ”€ ğŸ“± Celular Trabajador 2 .... 192.168.1.102
       â”œâ”€ ğŸ“± Tablet Trabajador 3 ...... 192.168.1.103
       â””â”€ ğŸ’» PC Admin ................. 192.168.1.104

  Todos acceden a: http://192.168.1.100
  Backend API:     http://192.168.1.100:3000/api

  âš ï¸  IMPORTANTE:
  - Todos los dispositivos deben estar en el MISMO WiFi
  - El servidor debe tener IP fija (configurar en /etc/netplan)
  - Puerto 80 y 3000 deben estar abiertos en el firewall

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ğŸ“Š ESTADOS DE LA INTERFAZ                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ”´ OFFLINE (Campo - Sin conexiÃ³n)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âš ï¸  Modo offline                           â”‚
  â”‚                                            â”‚
  â”‚ 3 formularios guardados offline           â”‚
  â”‚ Se sincronizarÃ¡n al conectar a la red.    â”‚
  â”‚                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸŸ¡ SINCRONIZANDO (Oficina - Subiendo datos)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”„ Sincronizando...                        â”‚
  â”‚                                            â”‚
  â”‚ Subiendo datos al servidor...             â”‚
  â”‚ 2 de 3 formularios sincronizados          â”‚
  â”‚                                            â”‚
  â”‚ [Sincronizar ahora]                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸŸ¢ SINCRONIZADO (Oficina - Todo listo)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… Servidor conectado                      â”‚
  â”‚                                            â”‚
  â”‚ Todo sincronizado correctamente           â”‚
  â”‚ 0 formularios pendientes                  â”‚
  â”‚                                            â”‚
  â”‚ Ãšltima sincronizaciÃ³n: 14:32              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Creado para CFE - ComisiÃ³n Federal de Electricidad
  ğŸ”‹ Llevando luz a cada rincÃ³n de MÃ©xico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
